<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>TravelBuddy â€” Smart Itinerary Planner</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0b1220; --panel:#0f1724; --accent:#06b6d4; --accent-2:#2dd4bf;
  --text:#e6eef6; --muted:#94a3b8; --card:#071022;
}
body.light {
  --bg:#f5f7fb; --panel:#ffffff; --accent:#0ea5e9; --accent-2:#22c1c3;
  --text:#0b1220; --muted:#64748b; --card:#f8fafc;
}
*{box-sizing:border-box;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;}
html,body{height:100%;margin:0;background:var(--bg);color:var(--text);}
.app{max-width:1200px;margin:24px auto;display:grid;grid-template-columns:420px 1fr;gap:20px;padding:18px}
.panel{background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));border:1px solid rgba(255,255,255,0.05);padding:14px;border-radius:12px}
@media (max-width:980px){.app{grid-template-columns:1fr;padding:12px}}
.chat{display:flex;flex-direction:column;height:78vh}
.top{display:flex;align-items:center;gap:12px;margin-bottom:8px}
.logo{width:46px;height:46px;border-radius:10px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;color:#042026;font-weight:700}
.title{font-size:16px;font-weight:600}
.subtitle{color:var(--muted);font-size:13px}
.messages{flex:1;overflow:auto;padding:10px;display:flex;flex-direction:column;gap:10px}
.bubble{max-width:84%;padding:10px 12px;border-radius:12px;line-height:1.35}
.bubble.bot{align-self:flex-start;background:rgba(255,255,255,0.05);color:var(--muted);}
.bubble.user{align-self:flex-end;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#042026}
.meta{font-size:11px;color:var(--muted);margin-top:6px}
.inputRow{display:flex;gap:8px;margin-top:10px}
.inputRow input{flex:1;padding:10px 12px;border-radius:8px;border:1px solid rgba(255,255,255,0.08);background:transparent;color:inherit}
.btn{padding:10px 12px;border-radius:8px;border:0;background:var(--accent);color:#042026;cursor:pointer;font-weight:600}
.quick{display:flex;gap:8px;margin-top:10px;flex-wrap:wrap}
.quick button{background:transparent;border:1px dashed rgba(255,255,255,0.05);padding:6px 10px;border-radius:8px;color:var(--muted);cursor:pointer}
.itinerary{display:flex;flex-direction:column;height:78vh;padding:10px;gap:12px}
.controls{display:flex;justify-content:space-between;align-items:center}
.itins{flex:1;overflow:auto;display:flex;flex-direction:column;gap:12px;padding-top:6px}
.dayCard{background:rgba(255,255,255,0.03);padding:12px;border-radius:10px;border-left:4px solid var(--accent)}
.small{font-size:13px;color:var(--muted)}
.save-btn{background:transparent;border:1px solid rgba(255,255,255,0.05);color:var(--muted);padding:6px 8px;border-radius:8px;cursor:pointer}
</style>
</head>
<body>
<div class="app">
  <div class="panel chat">
    <div class="top">
      <div class="logo">TB</div>
      <div>
        <div class="title">TravelBuddy</div>
        <div class="subtitle small">Try: "Plan 2 days in Paris"</div>
      </div>
      <button id="themeBtn" class="save-btn" title="Toggle light/dark">ðŸŒ™</button>
    </div>
    <div id="messages" class="messages"></div>
    <div class="inputRow">
      <input id="userInput" placeholder="Type a command..." />
      <button id="sendBtn" class="btn">Send</button>
    </div>
    <div class="quick">
      <button data-msg="Plan 1 day in Paris">1-day Paris</button>
      <button data-msg="Plan 2 days in Tokyo">2-day Tokyo</button>
      <button data-msg="Show popular countries">Popular countries</button>
    </div>
    <div class="small">Local demo â€” data stored in your browser</div>
  </div>

  <div class="panel itinerary">
    <div class="controls">
      <div>
        <h3 style="margin:0">Draft Itinerary</h3>
        <div class="small">Generated by TravelBuddy</div>
      </div>
      <div>
        <button id="saveItin" class="btn">Save</button>
        <button id="exportICal" class="btn">Export ICS</button>
      </div>
    </div>
    <div id="itins" class="itins"><div class="small">No itinerary yet</div></div>
  </div>
</div>

<script>
const DESTS={
  paris:{desc:"Paris â€” art, history, romance.",places:["Eiffel Tower","Louvre Museum","Notre-Dame","Montmartre","Seine Cruise"]},
  tokyo:{desc:"Tokyo â€” neon & temples.",places:["Shibuya Crossing","Senso-ji","Tokyo Tower","Asakusa","Ueno Park"]},
  bali:{desc:"Bali â€” beaches & rice terraces.",places:["Ubud","Uluwatu Temple","Kuta Beach","Tegallalang","Nusa Penida"]},
  london:{desc:"London â€” history & cosmopolitan life.",places:["Buckingham Palace","British Museum","Tower Bridge","London Eye","Covent Garden"]}
};
const messages=document.getElementById('messages');
function postMessage(t,from='bot'){const e=document.createElement('div');e.className='bubble '+(from==='user'?'user':'bot');e.innerHTML=t+`<div class='meta'>${new Date().toLocaleTimeString()}</div>`;messages.appendChild(e);messages.scrollTop=messages.scrollHeight;}
function findKey(loc){loc=loc.toLowerCase().replace(/\s+/g,'');return Object.keys(DESTS).find(k=>k.includes(loc));}
function genPlan(k,d){const data=DESTS[k];const arr=[];const per=Math.ceil(data.places.length/d);for(let i=0;i<d;i++){arr.push(data.places.slice(i*per,(i+1)*per));}return{city:k,days:arr,desc:data.desc};}
function renderItin(plan){const wrap=document.getElementById('itins');wrap.innerHTML='';plan.days.forEach((stops,i)=>{const d=document.createElement('div');d.className='dayCard';d.innerHTML=`<strong>Day ${i+1}</strong><br>${stops.join(', ')}`;wrap.appendChild(d);});window.currentItin=plan;}
function parseInput(txt){
  postMessage(txt,'user');
  const m=txt.toLowerCase().match(/plan\s+(\d+)\s*days?\s*(?:in)?\s*([a-zA-Z\s]+)/);
  if(m){const d=parseInt(m[1]);if(d>3)return postMessage("Max 3 days supported.");
    const key=findKey(m[2]);if(!key)return postMessage("Unknown city. Try Paris or Tokyo.");
    const plan=genPlan(key,d);renderItin(plan);return postMessage(`Hereâ€™s a ${d}-day plan for ${key.toUpperCase()}!`);}
  if(txt.toLowerCase().includes('popular'))return postMessage("Popular: Paris, Tokyo, Bali, London");
  postMessage("Try commands like 'Plan 2 days in Paris'");
}
document.getElementById('sendBtn').onclick=()=>parseInput(document.getElementById('userInput').value);
document.querySelectorAll('.quick button').forEach(b=>b.onclick=()=>parseInput(b.dataset.msg));
document.getElementById('themeBtn').onclick=()=>document.body.classList.toggle('light');
document.getElementById('saveItin').onclick=()=>{
  if(window.currentItin){localStorage.setItem('travelbuddy',JSON.stringify(window.currentItin));postMessage("Itinerary saved.");}
  else postMessage("No itinerary to save.");
};
document.getElementById('exportICal').onclick=()=>{
  if(!window.currentItin)return postMessage("No itinerary to export.");
  const text="BEGIN:VCALENDAR\nVERSION:2.0\n"+window.currentItin.days.map((stops,i)=>`BEGIN:VEVENT\nSUMMARY:Day ${i+1} - ${stops.join(', ')}\nEND:VEVENT`).join('\n')+"\nEND:VCALENDAR";
  const blob=new Blob([text],{type:'text/calendar'});
  const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download='itinerary.ics';a.click();postMessage("ICS file exported.");
};
</script>
</body>
</html>
